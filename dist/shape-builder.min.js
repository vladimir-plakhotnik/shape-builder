var o=function(){function o(o,t,n){this.center=o,this.radius=t,this.options=n}return o.prototype.draw=function(o){return o?function(o,t){var n,i,e,s,r;o.save(),(null===(n=t.options)||void 0===n?void 0:n.fillColor)&&(o.fillStyle=t.options.fillColor),(null===(i=t.options)||void 0===i?void 0:i.borderColor)&&(o.strokeStyle=t.options.borderColor),(null===(e=t.options)||void 0===e?void 0:e.thickness)&&(o.lineWidth=t.options.thickness),(null===(s=t.options)||void 0===s?void 0:s.dash)&&o.setLineDash(t.options.dash),o.beginPath(),o.arc(t.center.x,t.center.y,t.radius,0,2*Math.PI,!1),o.closePath(),(null===(r=t.options)||void 0===r?void 0:r.fillColor)&&o.fill(),o.stroke(),o.restore()}(o,this):(r='cx="'.concat((t=this).center.x,'" cy="').concat(t.center.y,'" r="').concat(t.radius,'"'),(null===(n=t.options)||void 0===n?void 0:n.fillColor)?r+=' fill="'.concat(t.options.fillColor,'"'):r+=' fill="none"',(null===(i=t.options)||void 0===i?void 0:i.borderColor)&&(r+=' stroke="'.concat(t.options.borderColor,'"')),(null===(e=t.options)||void 0===e?void 0:e.thickness)&&(r+=' stroke-width="'.concat(t.options.thickness,'"')),(null===(s=t.options)||void 0===s?void 0:s.dash)&&(r+=' stroke-dasharray="'.concat(t.options.dash.join(","),'"')),"<circle ".concat(r," />"));var t,n,i,e,s,r},o}(),t=function(){function o(o,t){this.x=o,this.y=t}return o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o}();var n=function(){function o(o,t){this.points=o,this.options=t}return o.prototype.draw=function(o){return o?function(o,n){var i,e,s,r,l,a;o.save(),(null===(i=n.options)||void 0===i?void 0:i.fillColor)&&(o.fillStyle=n.options.fillColor),(null===(e=n.options)||void 0===e?void 0:e.borderColor)&&(o.strokeStyle=n.options.borderColor),(null===(s=n.options)||void 0===s?void 0:s.thickness)&&(o.lineWidth=n.options.thickness),(null===(r=n.options)||void 0===r?void 0:r.dash)&&o.setLineDash(n.options.dash);var c=new t(n.points[0].x,n.points[0].y);o.beginPath(),o.moveTo(c.x,c.y);for(var d=1;d<n.points.length;d++){var h=new t(n.points[d].x,n.points[d].y);o.lineTo(h.x,h.y)}(null===(l=n.options)||void 0===l?void 0:l.fillColor)&&o.fill(),(null===(a=n.options)||void 0===a?void 0:a.borderColor)&&o.stroke(),o.closePath(),o.restore()}(o,this):function(o){for(var t,n,i,e,s="M".concat(o.points[0].x," ").concat(o.points[0].y),r=1;r<o.points.length;r++)s+=" L".concat(o.points[r].x," ").concat(o.points[r].y);return s='d="'.concat(s,'"'),(null===(t=o.options)||void 0===t?void 0:t.fillColor)?s+=' fill="'.concat(o.options.fillColor,'"'):s+=' fill="none"',(null===(n=o.options)||void 0===n?void 0:n.borderColor)&&(s+=' stroke="'.concat(o.options.borderColor,'"')),(null===(i=o.options)||void 0===i?void 0:i.thickness)&&(s+=' stroke-width="'.concat(o.options.thickness,'"')),(null===(e=o.options)||void 0===e?void 0:e.dash)&&(s+=' stroke-dasharray="'.concat(o.options.dash.join(","),'"')),"<path ".concat(s," />")}(this)},o}();var i=function(){function o(o,t,n){this.start=o,this.end=t,this.options=n}return o.prototype.draw=function(o){return o?function(o,t){var n,i,e;o.save(),(null===(n=t.options)||void 0===n?void 0:n.color)&&(o.strokeStyle=t.options.color),(null===(i=t.options)||void 0===i?void 0:i.thickness)&&(o.lineWidth=t.options.thickness),(null===(e=t.options)||void 0===e?void 0:e.dash)&&o.setLineDash(t.options.dash),o.beginPath(),o.moveTo(t.start.x,t.start.y),o.lineTo(t.end.x,t.end.y),o.stroke(),o.closePath(),o.restore()}(o,this):(s='x1="'.concat((t=this).start.x,'" y1="').concat(t.start.y,'" x2="').concat(t.end.x,'" y2="').concat(t.end.y,'"'),(null===(n=t.options)||void 0===n?void 0:n.color)&&(s+=' stroke="'.concat(t.options.color,'"')),(null===(i=t.options)||void 0===i?void 0:i.thickness)&&(s+=' stroke-width="'.concat(t.options.thickness,'"')),(null===(e=t.options)||void 0===e?void 0:e.dash)&&(s+=' stroke-dasharray="'.concat(t.options.dash.join(","),'"')),"<line ".concat(s," />"));var t,n,i,e,s},o}();var e=function(){function o(o,t,n,i){this.coordinates=o,this.width=t,this.height=n,this.options=i}return o.prototype.draw=function(o){return o?function(o,t){var n,i,e,s,r,l;o.save(),(null===(n=t.options)||void 0===n?void 0:n.fillColor)&&(o.fillStyle=t.options.fillColor),(null===(i=t.options)||void 0===i?void 0:i.borderColor)&&(o.strokeStyle=t.options.borderColor),(null===(e=t.options)||void 0===e?void 0:e.thickness)&&(o.lineWidth=t.options.thickness),(null===(s=t.options)||void 0===s?void 0:s.dash)&&o.setLineDash(t.options.dash),(null===(r=t.options)||void 0===r?void 0:r.fillColor)&&o.fillRect(t.coordinates.x,t.coordinates.y,t.width,t.height),(null===(l=t.options)||void 0===l?void 0:l.borderColor)&&o.strokeRect(t.coordinates.x,t.coordinates.y,t.width,t.height),o.restore()}(o,this):function(o){var t,n,i,e,s=o.coordinates.x,r=o.width;r<0&&(s+=o.width,r=Math.abs(r));var l=o.coordinates.y,a=o.height;a<0&&(l+=o.height,a=Math.abs(a));var c='x="'.concat(s,'" y="').concat(l,'" width="').concat(r,'" height="').concat(a,'"');return(null===(t=o.options)||void 0===t?void 0:t.fillColor)?c+=' fill="'.concat(o.options.fillColor,'"'):c+=' fill="none"',(null===(n=o.options)||void 0===n?void 0:n.borderColor)&&(c+=' stroke="'.concat(o.options.borderColor,'"')),(null===(i=o.options)||void 0===i?void 0:i.thickness)&&(c+=' stroke-width="'.concat(o.options.thickness,'"')),(null===(e=o.options)||void 0===e?void 0:e.dash)&&(c+=' stroke-dasharray="'.concat(o.options.dash.join(","),'"')),"<rect ".concat(c," />")}(this)},o}();function s(o,t){var n,i,e,s;o.save(),(null===(n=t.options)||void 0===n?void 0:n.color)&&(o.fillStyle=t.options.color),(null===(i=t.options)||void 0===i?void 0:i.font)&&(o.font=r.fontStyleToString(t.options.font)),(null===(e=t.options)||void 0===e?void 0:e.text)&&(o.textAlign=t.options.text.align,o.textBaseline=t.options.text.baseline),(null===(s=t.options)||void 0===s?void 0:s.rotate)?(o.translate(t.coordinates.x,t.coordinates.y),o.rotate(t.options.rotate*Math.PI/180),o.fillText(t.text,0,0)):o.fillText(t.text,t.coordinates.x,t.coordinates.y),o.restore()}var r=function(){function o(o,t,n){this.coordinates=o,this.text=t,this.options=n}return o.prototype.draw=function(o){return o?s(o,this):function(o){var t,n,i,e,s,r,l,a,c,d,h,u,p,v,f,y,x,g,b,k,w;switch(w=(null===(t=o.options)||void 0===t?void 0:t.rotate)?'x="0" y="0" transform="translate('.concat(o.coordinates.x,", ").concat(o.coordinates.y,") rotate(").concat(o.options.rotate,')"'):'x="'.concat(o.coordinates.x,'" y="').concat(o.coordinates.y,'"'),(null===(n=o.options)||void 0===n?void 0:n.color)&&(w+=' fill="'.concat(o.options.color,'"')),(null===(e=null===(i=o.options)||void 0===i?void 0:i.font)||void 0===e?void 0:e.family)&&(w+=' font-family="'.concat(o.options.font.family,'"')),(null===(r=null===(s=o.options)||void 0===s?void 0:s.font)||void 0===r?void 0:r.size)&&(w+=' font-size="'.concat(o.options.font.size,'"')),(null===(a=null===(l=o.options)||void 0===l?void 0:l.font)||void 0===a?void 0:a.style)&&(w+=' font-style="'.concat(o.options.font.style,'"')),(null===(d=null===(c=o.options)||void 0===c?void 0:c.font)||void 0===d?void 0:d.weight)&&(w+=' font-weight="'.concat(o.options.font.weight,'"')),(null===(u=null===(h=o.options)||void 0===h?void 0:h.font)||void 0===u?void 0:u.variant)&&(w+=' font-variant="'.concat(o.options.font.variant,'"')),(null===(v=null===(p=o.options)||void 0===p?void 0:p.font)||void 0===v?void 0:v.stretch)&&(w+=' font-stretch="'.concat(o.options.font.stretch,'"')),(null===(y=null===(f=o.options)||void 0===f?void 0:f.font)||void 0===y?void 0:y.kerning)&&(w+=' font-kerning="'.concat(o.options.font.kerning,'"')),null===(g=null===(x=o.options)||void 0===x?void 0:x.text)||void 0===g?void 0:g.align){case"center":w+=' text-anchor="middle"';break;case"right":case"end":w+=' text-anchor="end"';break;default:w+=' text-anchor="start"'}switch(null===(k=null===(b=o.options)||void 0===b?void 0:b.text)||void 0===k?void 0:k.baseline){case"top":case"hanging":w+=' dominant-baseline="hanging"';break;case"alphabetic":w+=' dominant-baseline="alphabetic"';break;case"ideographic":w+=' dominant-baseline="ideographic"';break;case"middle":w+=' dominant-baseline="middle"';break;default:w+=' dominant-baseline="auto"'}return"<text ".concat(w,">").concat(o.text,"</text>")}(this)},o.measure=function(t,n,i){i&&(t.save(),t.font=o.fontStyleToString(i));var e=t.measureText(n);return i&&t.restore(),e},o.fitIntoBox=function(t,n,i,e){t.save(),e&&(t.font=o.fontStyleToString(e));var s=t.font.split(" "),r=s.findIndex((function(o){return/\d+px/.test(o.trim())}));if(-1===r)throw new Error("Font size does not found in an image context");var l=parseInt(s[r]);if(!l)throw new Error("Font size does not found in an image context");var a=function(){s[r]="".concat(l,"px"),t.font=s.join(" ")},c=function(o){return t.measureText(o).width},d=function(o){return t.measureText(o).actualBoundingBoxAscent+t.measureText(o).actualBoundingBoxDescent};if(c(n)>i.width||d(n)>i.height)for(;c(n)>i.width||d(n)>i.height;)l--,a();else{for(;c(n)<i.width&&d(n)<i.height;)l++,a();(c(n)>i.width||d(n)>i.height)&&l--}return t.restore(),l},o.fontStyleToString=function(o){var t="";return o.style&&(t="".concat(o.style," ")),o.variant&&(t+="".concat(o.variant," ")),o.weight&&(t+="".concat(o.weight," ")),o.stretch&&(t+="".concat(o.stretch," ")),o.size&&(t+="".concat(o.size," ")),o.lineHeight&&(t+="".concat(o.lineHeight," ")),o.family&&(t+="".concat(o.family)),t.trim()},o}(),l=Object.freeze({__proto__:null,Circle:o,Curve:n,Line:i,Point:t,Rectangle:e,Text:r}),a=Object.freeze({__proto__:null}),c=function(){function o(o){this.object=o}return o.prototype.exclude=function(o){var t=this;return Object.keys(this.object).filter((function(t){return!o.includes(t)})).reduce((function(o,n){return o[n]=t.object[n],o}),{})},o.prototype.include=function(o){var t=this;return Object.keys(this.object).filter((function(t){return o.includes(t)})).reduce((function(o,n){return o[n]=t.object[n],o}),{})},o.prototype.stringify=function(){var o="";for(var t in this.object)o+="".concat(t,":").concat(this.object[t],"; ");return o.trim()},o.prototype.values=function(){var o="";for(var t in this.object)o+="".concat(this.object[t]," ");return o.trim()},o.parse=function(o){for(var t={},n=0,i=o.trim().split(";").map((function(o){return o.trim()}));n<i.length;n++){var e=i[n].split(":").map((function(o){return o.trim()})),s=e[0],r=e[1];t[s]=r}return t},o}(),d=function(){function o(o){this.shapes=[],o&&(this.shapes=o)}return o.prototype.addShape=function(o){return this.shapes.push(o),this},o.prototype.addShapes=function(){for(var o,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(o=this.shapes).push.apply(o,t),this},o.prototype.removeShapes=function(o){return o&&this.shapes.length>o?this.shapes=this.shapes.slice(0,this.shapes.length-o):this.shapes=[],this},o.prototype.draw=function(o,t){if("function"==typeof o||"object"==typeof o)return this.shapes.forEach((function(t){return t.draw(o)}));if("number"==typeof o&&"number"==typeof t)return'<svg width="'.concat(o,'" height="').concat(t,'">\n').concat(this.shapes.map((function(o){return o.draw()})).join("\n"),"\n</svg>");throw new TypeError("Wrong arguments.")},o}();export{d as Builder,c as Transform,a as interfaces,l as shapes};
//# sourceMappingURL=shape-builder.min.js.map
